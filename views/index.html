<%- include('./layout.html'); %>

<body>
  <div class="container">
    <div class="row">
      <form class="column column-66" id="form" onsubmit="return false">
        <h1><%=title%> <small>ä¸ºäº†æ–¹ä¾¿æŠŠåšå®¢å›­çš„æ–‡ç« æ¬åˆ°è‡ªå·±çš„ç½‘ç«™ğŸ˜</small></h1>
        
        <h3>å¤šé“¾æ¥çˆ¬å– <small class="exampleBtn">æŸ¥çœ‹ç¤ºä¾‹</small></h3>
        <div class="row">
          <div class="column column-50">
            <label for="list_link">æ–‡ç« åˆ—è¡¨é“¾æ¥</label>
            <input type="text" placeholder="" id="list_link" data-easyform="regex:^[a-zA-z]+://[^\s]*$;real-time;"
              name="list_link" data-message="è¯·è¾“å…¥æ­£ç¡®çš„ç½‘å€" data-easytip="position:right;class:easy-blue;">
            <label for="page_start">èµ·å§‹é¡µ</label>
            <input type="text" value="1" id="page_start" data-easyform="number;real-time" data-message="è¯·è¾“å…¥æ•°å­—"
              name="page_start" data-easytip="class:easy-blue">
            <label for="target_tit">æ–‡ç« æ ‡é¢˜çš„Class/ID(aæ ‡ç­¾)</label>
            <input type="text" placeholder="" id="target_tit" data-easyform="real-time" data-message="å¿…é€‰é¡¹ï¼"
              name="target_tit" data-easytip="class:easy-blue">
          </div>
          <div class="column column-50">
            <label for="list_link_class">æ–‡ç« é“¾æ¥çš„Class/ID(aæ ‡ç­¾)</label>
            <input type="text" placeholder="" id="list_link_class" data-easyform="real-time" data-message="å¿…é€‰é¡¹ï¼"
              name="list_link_class" data-easytip="class:easy-blue">
            <label for="page_end">ç»“æŸé¡µ</label>
            <input type="text" value="1" id="page_end" data-easyform="number;real-time" data-message="è¯·è¾“å…¥æ•°å­—"
              name="page_end" data-easytip="class:easy-blue">
            <label for="target_content">æ–‡ç« å†…å®¹çš„Class/ID(aæ ‡ç­¾)</label>
            <input type="text" placeholder="" id="target_content" data-easyform="real-time" data-message="å¿…é€‰é¡¹ï¼"
              name="target_content" data-easytip="class:easy-blue">
          </div>
        </div>
        <div class="row">
          <div class="column float-left">
            <label for="page_start">è¾“å‡ºç±»å‹ï¼ˆhtml/markdownï¼‰</label>
            <div class="row pt-2">
              <div class="column column-33">
                <input type="radio" name="outputType" value="html" id="type_html" checked>
                <label class="label-inline" for="type_html">html</label>
              </div>
              <div class="column column-33">
                <input type="radio" name="outputType" value="md" id="type_md">
                <label class="label-inline" for="type_md">md</label>
              </div>
            </div>
            <div class="clearfix"></div>
            <div class="row">
              <button id="send" class="ladda-button column column-33 column-offset-66 button-primary" type="submit"
                data-color="purple" data-style="expand-left">å¼€çˆ¬ï¼</button>
            </div>
          </div>
        </div>
      </form>
      <div class="column column-33">
        <div class="oneloader loader"></div>
        <h4> <b>æ¯æ—¥ä¸€å¥</b> </h4>
        <i class="iconfont">&#xe7a8;</i>
        <img class="oneimg" src="" alt="">
        <audio class="oneaudio hidden" src="" id="audio" controls="controls"></audio>
      </div>
    </div>
    <!-- å®ä¾‹ -->
    <div class="examples">
      <div class="examplesHeader"> <h3>ä»¥åšå®¢å›­ä¸ºä¾‹</h3>  <span class="close">X</span></div>
      <table>
        <tbody>
          <tr>
            <td><b>æ–‡ç« åˆ—è¡¨é“¾æ¥</b></td>
            <td>https://www.cnblogs.com/asenper/default.html<b>?page=</b></td>
          </tr>
          <tr>
            <td><b>æ–‡ç« é“¾æ¥çš„Class/ID(aæ ‡ç­¾)</b></td>
            <td>postTitle2ï¼ˆå‰è¾¹éœ€è¦åŠ ä¸Šç±» Â· or #ï¼‰</td>
          </tr>
          <tr>
            <td><b>èµ·å§‹é¡µ</b></td>
            <td>1</td>
          </tr>
          <tr>
            <td><b>ç»“æŸé¡µ</b></td>
            <td>1</td>
          </tr>
          <tr>
            <td><b>æ–‡ç« æ ‡é¢˜çš„Class/ID(aæ ‡ç­¾)</b></td>
            <td>.postTitle2 ï¼ˆå‰è¾¹éœ€è¦åŠ ä¸Šç±» Â· or #ï¼‰</td>
          </tr>
          <tr>
            <td><b>æ–‡ç« å†…å®¹çš„Class/ID(aæ ‡ç­¾)</b></td>
            <td>.blogpost-body ï¼ˆå‰è¾¹éœ€è¦åŠ ä¸Šç±» Â· or #ï¼‰</td>
          </tr>
          <tr>
            <td><b>è¾“å‡ºç±»å‹</b></td>
            <td> htmlæ–‡ä»¶ã€mdæ–‡ä»¶ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; çˆ¬å–å®Œå†…å®¹åä»¥htmlæˆ–mdæ‰“åŒ…ä¸‹è½½ </td>
          </tr>
        </tbody>
      </table>
      <a href="http://cloud.asenper.cn/20200704203035.png">
        <img src="http://cloud.asenper.cn/20200704203035.png" alt="">
      </a>
      <a href="http://cloud.asenper.cn//20200704203034.png">
      <img src="http://cloud.asenper.cn//20200704203034.png" alt="">
      </a>
    </div>
  </div>
  <footer>
    æœ¬é¡¹ç›®æä¾›çš„å†…å®¹ä»…ç”¨äºä¸ªäººå­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä¸ä¿è¯å†…å®¹çš„æ­£ç¡®æ€§ã€‚é€šè¿‡ä½¿ç”¨æœ¬ç«™å†…å®¹éšä¹‹è€Œæ¥çš„é£é™©ä¸æœ¬ç«™æ— å…³ã€‚
    è®¿é—®è€…å¯å°†æœ¬ç«™å‘å¸ƒçš„å†…å®¹ç”¨äºä¸ªäººå­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä»¥åŠå…¶ä»–éå•†ä¸šæ€§æˆ–éç›ˆåˆ©æ€§ç”¨é€”ï¼Œä½†åŒæ—¶åº”éµå®ˆè‘—ä½œæƒæ³•åŠå…¶ä»–ç›¸å…³æ³•å¾‹çš„è§„å®šï¼Œä¸å¾—ä¾µçŠ¯æœ¬ç«™åŠç›¸å…³æƒåˆ©äººçš„åˆæ³•æƒåˆ©ã€‚
    å¦‚æœ‰ä¾µæƒè¯·åŠæ—¶è”ç³»ï¼Œæœ¬ç«™å°†ç«‹å³åˆ é™¤ã€‚<a href="http://blog.asenper.cn">ZJT's Blog </a>
   </footer>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="/javascript/easyform/easyform.js"></script>
  <script src="/javascript/index-bundle.js"></script>
  <script>
    $(document).ready(function () {
      $(".iconfont").click(function () {
        var audio = document.querySelector("#audio")
        audio.play()
      })
      $("#form").easyform()
      var l = ladda.create(document.querySelector('#send'));
      $("#form").on("submit", function () {
        l.start()
        getData()
        event.preventDefault()
      })
      $(".exampleBtn").click(function(){
        $('.examples').animate({
          height:"550px",
          width:"100%"
        })
      })
      $(".close").click(function(){
        $('.examples').animate({
          height:0,
          width:0
        })
      })

      function getData() {
        var list_link = $("#list_link").val(),
          list_link_class = $("#list_link_class").val(),
          page_start = $("#page_start").val(),
          page_end = $("#page_end").val(),
          target_tit = $("#target_tit").val(),
          target_content = $("#target_content").val(),
          outputType = $('input:radio[name="outputType"]:checked').val()
        $.post({
          url: '/spider',
          data: {
            list_link,
            list_link_class,
            page_start,
            page_end,
            target_tit,
            target_content,
            outputType
          },
          success(res) {
            l.stop()
            if(res.code==1){
              location.href += res.msg.path
            }else{
              alert(res.msg)
            }
          },
        })
      }

      // æ¯æ—¥ä¸€å¥
      $.get({
        url: 'http://open.iciba.com/dsapi/',
        method: 'GET',
        dataType: 'jsonp',
        success(res) {
          $(".oneloader").attr('hidden', 'true')
          $(".oneimg").attr('src', res.fenxiang_img)
          $(".oneaudio").attr('src', res.tts)
        },
        error(err) {
          alert("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œ")
        }
      })
    })
  </script>
</body>